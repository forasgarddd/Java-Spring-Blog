<!DOCTYPE HTML>
<html xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <title>Site blog</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel=stylesheet href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css">
</head>

<body>
<header th:insert="blocks/header :: header"></header>
<table class="table table-bordered">
    <thead>
    <tr>
        <th> Name</th>
        <th> Role</th>
        <th></th>
    </tr>
    </thead>
    <tbody>
    <tr th:if="${users.isEmpty()}">
        <td colspan="2"> No Users Available</td>
    </tr>
    <tr th:each="user : ${users}">
        <td><span th:text="${user.getUsername()}"> Name </span></td>
        <td>
            <table>
                <tr>
                    <th></th>
                </tr>
                <tr>
                <span th:each="role,iterStat : ${user.getRoles()}"
                      th:text="${role.name()} + ${!iterStat.last ? ', ' : ''}"></span>
                </tr>
            </table>
        </td>
        <td><a th:href="'user/' + ${user.id}"> Edit </a></td>
    </tr>
    </tbody>
</table>
<footer th:insert="blocks/footer :: footer"></footer>
</body>
</html>